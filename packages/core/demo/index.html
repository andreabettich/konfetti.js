<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>konfetti.js Demo</title>
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Oxygen, Ubuntu, sans-serif;
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        min-height: 100vh;
        color: #fff;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 2rem;
      }

      h1 {
        text-align: center;
        font-size: 2.5rem;
        margin-bottom: 0.5rem;
        background: linear-gradient(90deg, #ff6b6b, #feca57, #48dbfb, #ff9ff3);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .subtitle {
        text-align: center;
        color: #888;
        margin-bottom: 2rem;
      }

      .main-content {
        display: grid;
        grid-template-columns: 1fr 350px;
        gap: 2rem;
      }

      @media (max-width: 900px) {
        .main-content {
          grid-template-columns: 1fr;
        }
      }

      .demo-area {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 16px;
        padding: 2rem;
        min-height: 400px;
        display: flex;
        flex-direction: column;
      }

      .presets {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 0.75rem;
        margin-bottom: 2rem;
      }

      .preset-btn {
        padding: 0.75rem 1rem;
        border: none;
        border-radius: 8px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        font-size: 0.9rem;
        font-weight: 500;
        cursor: pointer;
        transition: transform 0.2s, box-shadow 0.2s;
      }

      .preset-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
      }

      .preset-btn:active {
        transform: translateY(0);
      }

      .fire-btn {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        padding: 1rem 2rem;
        font-size: 1.1rem;
        width: 100%;
        margin-top: auto;
      }

      .controls {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 16px;
        padding: 1.5rem;
      }

      .controls h2 {
        font-size: 1.2rem;
        margin-bottom: 1.5rem;
        color: #ccc;
      }

      .control-group {
        margin-bottom: 1.25rem;
      }

      .control-label {
        display: flex;
        justify-content: space-between;
        margin-bottom: 0.5rem;
        font-size: 0.85rem;
        color: #aaa;
      }

      .control-value {
        color: #48dbfb;
        font-weight: 600;
      }

      input[type="range"] {
        width: 100%;
        height: 6px;
        border-radius: 3px;
        background: #333;
        outline: none;
        -webkit-appearance: none;
      }

      input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 18px;
        height: 18px;
        border-radius: 50%;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        cursor: pointer;
      }

      input[type="range"]::-moz-range-thumb {
        width: 18px;
        height: 18px;
        border-radius: 50%;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        cursor: pointer;
        border: none;
      }

      .color-inputs {
        display: flex;
        gap: 0.5rem;
        flex-wrap: wrap;
      }

      .color-input {
        width: 40px;
        height: 40px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        padding: 0;
        overflow: hidden;
      }

      .color-input::-webkit-color-swatch-wrapper {
        padding: 0;
      }

      .color-input::-webkit-color-swatch {
        border: none;
        border-radius: 8px;
      }

      .code-preview {
        background: #0d1117;
        border-radius: 8px;
        padding: 1rem;
        margin-top: 1.5rem;
        font-family: "Fira Code", "Consolas", monospace;
        font-size: 0.75rem;
        line-height: 1.5;
        overflow-x: auto;
      }

      .code-preview code {
        color: #c9d1d9;
      }

      .code-preview .keyword {
        color: #ff7b72;
      }

      .code-preview .function {
        color: #d2a8ff;
      }

      .code-preview .property {
        color: #79c0ff;
      }

      .code-preview .number {
        color: #a5d6ff;
      }

      .code-preview .string {
        color: #a5d6ff;
      }

      .shape-buttons {
        display: flex;
        gap: 0.5rem;
      }

      .shape-btn {
        padding: 0.5rem 1rem;
        border: 2px solid #444;
        border-radius: 6px;
        background: transparent;
        color: #aaa;
        font-size: 0.85rem;
        cursor: pointer;
        transition: all 0.2s;
      }

      .shape-btn.active {
        border-color: #667eea;
        color: #fff;
        background: rgba(102, 126, 234, 0.2);
      }

      .click-area {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #666;
        font-size: 0.9rem;
        border: 2px dashed #333;
        border-radius: 8px;
        margin-top: 1rem;
        cursor: crosshair;
        min-height: 200px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>konfetti.js</h1>
      <p class="subtitle">
        A lightweight, performant confetti animation library
      </p>

      <div class="main-content">
        <div class="demo-area">
          <h2 style="margin-bottom: 1rem; color: #ccc">Presets</h2>
          <div class="presets">
            <button class="preset-btn" onclick="konfetti.cannon()">
              Cannon
            </button>
            <button class="preset-btn" onclick="konfetti.explosion()">
              Explosion
            </button>
            <button class="preset-btn" onclick="konfetti.fireworks()">
              Fireworks
            </button>
            <button class="preset-btn" onclick="konfetti.rain()">Rain</button>
            <button class="preset-btn" onclick="konfetti.snow()">Snow</button>
            <button class="preset-btn" onclick="konfetti.sideCannons()">
              Side Cannons
            </button>
            <button class="preset-btn" onclick="konfetti.pride()">Pride</button>
            <button class="preset-btn" onclick="startContinuous()">
              Continuous
            </button>
          </div>

          <div class="click-area" id="clickArea">
            Click anywhere to fire konfetti at that position
          </div>

          <button class="preset-btn fire-btn" onclick="fireCustom()">
            Fire Custom Konfetti
          </button>
        </div>

        <div class="controls">
          <h2>Configuration</h2>

          <div class="control-group">
            <div class="control-label">
              <span>Particle Count</span>
              <span class="control-value" id="particleCountValue">50</span>
            </div>
            <input
              type="range"
              id="particleCount"
              min="10"
              max="200"
              value="50"
              oninput="updateValue(this)"
            />
          </div>

          <div class="control-group">
            <div class="control-label">
              <span>Spread</span>
              <span class="control-value" id="spreadValue">45</span>
            </div>
            <input
              type="range"
              id="spread"
              min="0"
              max="360"
              value="45"
              oninput="updateValue(this)"
            />
          </div>

          <div class="control-group">
            <div class="control-label">
              <span>Start Velocity</span>
              <span class="control-value" id="startVelocityValue">45</span>
            </div>
            <input
              type="range"
              id="startVelocity"
              min="10"
              max="100"
              value="45"
              oninput="updateValue(this)"
            />
          </div>

          <div class="control-group">
            <div class="control-label">
              <span>Gravity</span>
              <span class="control-value" id="gravityValue">1.0</span>
            </div>
            <input
              type="range"
              id="gravity"
              min="0"
              max="3"
              step="0.1"
              value="1"
              oninput="updateValue(this)"
            />
          </div>

          <div class="control-group">
            <div class="control-label">
              <span>Decay</span>
              <span class="control-value" id="decayValue">0.90</span>
            </div>
            <input
              type="range"
              id="decay"
              min="0.8"
              max="0.99"
              step="0.01"
              value="0.9"
              oninput="updateValue(this)"
            />
          </div>

          <div class="control-group">
            <div class="control-label">
              <span>Drift</span>
              <span class="control-value" id="driftValue">0</span>
            </div>
            <input
              type="range"
              id="drift"
              min="-3"
              max="3"
              step="0.1"
              value="0"
              oninput="updateValue(this)"
            />
          </div>

          <div class="control-group">
            <div class="control-label">
              <span>Scalar (Size)</span>
              <span class="control-value" id="scalarValue">1.0</span>
            </div>
            <input
              type="range"
              id="scalar"
              min="0.5"
              max="3"
              step="0.1"
              value="1"
              oninput="updateValue(this)"
            />
          </div>

          <div class="control-group">
            <div class="control-label">
              <span>Colors</span>
            </div>
            <div class="color-inputs">
              <input
                type="color"
                class="color-input"
                id="color1"
                value="#26ccff"
              />
              <input
                type="color"
                class="color-input"
                id="color2"
                value="#a25afd"
              />
              <input
                type="color"
                class="color-input"
                id="color3"
                value="#ff5e7e"
              />
              <input
                type="color"
                class="color-input"
                id="color4"
                value="#88ff5a"
              />
              <input
                type="color"
                class="color-input"
                id="color5"
                value="#fcff42"
              />
            </div>
          </div>

          <div class="control-group">
            <div class="control-label">
              <span>Shapes</span>
            </div>
            <div class="shape-buttons">
              <button
                class="shape-btn active"
                id="shapeCircle"
                onclick="toggleShape('circle')"
              >
                Circle
              </button>
              <button
                class="shape-btn active"
                id="shapeSquare"
                onclick="toggleShape('square')"
              >
                Square
              </button>
            </div>
          </div>

          <div class="code-preview">
            <code id="codePreview">
              <span class="function">fire</span>({
              <span class="property">particleCount</span>:
              <span class="number">50</span>,
              <span class="property">spread</span>:
              <span class="number">45</span>,
              <span class="property">startVelocity</span>:
              <span class="number">45</span>
              });
            </code>
          </div>
        </div>
      </div>
    </div>

    <!-- Load the library -->
    <script src="../dist/konfetti.umd.js"></script>
    <script>
      // Named exports are available on window.konfetti
      const { fire, reset, cannon, explosion, fireworks, rain, snow, sideCannons, pride, continuous } = konfetti;

      let continuousStop = null;
      const activeShapes = new Set(["circle", "square"]);

      function updateValue(input) {
        const valueEl = document.getElementById(input.id + "Value");
        if (valueEl) {
          const val = parseFloat(input.value);
          valueEl.textContent = Number.isInteger(val) ? val : val.toFixed(2);
        }
        updateCodePreview();
      }

      function toggleShape(shape) {
        const btn = document.getElementById(
          "shape" + shape.charAt(0).toUpperCase() + shape.slice(1)
        );
        if (activeShapes.has(shape)) {
          if (activeShapes.size > 1) {
            activeShapes.delete(shape);
            btn.classList.remove("active");
          }
        } else {
          activeShapes.add(shape);
          btn.classList.add("active");
        }
        updateCodePreview();
      }

      function getConfig() {
        return {
          particleCount: parseInt(
            document.getElementById("particleCount").value
          ),
          spread: parseInt(document.getElementById("spread").value),
          startVelocity: parseInt(
            document.getElementById("startVelocity").value
          ),
          gravity: parseFloat(document.getElementById("gravity").value),
          decay: parseFloat(document.getElementById("decay").value),
          drift: parseFloat(document.getElementById("drift").value),
          scalar: parseFloat(document.getElementById("scalar").value),
          colors: [
            document.getElementById("color1").value,
            document.getElementById("color2").value,
            document.getElementById("color3").value,
            document.getElementById("color4").value,
            document.getElementById("color5").value,
          ],
          shapes: Array.from(activeShapes),
        };
      }

      function fireCustom() {
        fire(getConfig());
      }

      function startContinuous() {
        if (continuousStop) {
          continuousStop();
          continuousStop = null;
        } else {
          continuousStop = continuous(getConfig(), 200);
        }
      }

      function updateCodePreview() {
        const config = getConfig();
        const preview = document.getElementById("codePreview");

        let code = `<span class="function">fire</span>({\n`;
        code += `  <span class="property">particleCount</span>: <span class="number">${config.particleCount}</span>,\n`;
        code += `  <span class="property">spread</span>: <span class="number">${config.spread}</span>,\n`;
        code += `  <span class="property">startVelocity</span>: <span class="number">${config.startVelocity}</span>,\n`;
        code += `  <span class="property">gravity</span>: <span class="number">${config.gravity}</span>,\n`;
        code += `  <span class="property">decay</span>: <span class="number">${config.decay}</span>,\n`;
        code += `  <span class="property">drift</span>: <span class="number">${config.drift}</span>,\n`;
        code += `  <span class="property">scalar</span>: <span class="number">${config.scalar}</span>,\n`;
        code += `  <span class="property">shapes</span>: [<span class="string">'${Array.from(
          activeShapes
        ).join("', '")}'</span>]\n`;
        code += `});`;

        preview.innerHTML = code;
      }

      // Click to fire at position
      document
        .getElementById("clickArea")
        .addEventListener("click", function (e) {
          const rect = this.getBoundingClientRect();
          const x = (e.clientX - rect.left) / rect.width;
          const y = (e.clientY - rect.top) / rect.height;

          // Convert to page coordinates
          const pageX = e.clientX / window.innerWidth;
          const pageY = e.clientY / window.innerHeight;

          const config = getConfig();
          config.origin = { x: pageX, y: pageY };
          fire(config);
        });

      // Initialize
      updateCodePreview();
    </script>
  </body>
</html>
